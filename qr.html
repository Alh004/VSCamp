<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>QR Generator</title>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

    <style>
        body { font-family: Inter, sans-serif; padding: 20px; }
        .qr-box {
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 12px;
            background: #f0f0f8;
        }
    </style>
</head>

<body>

<h1>QR Koder til lokaler</h1>
<div id="list"></div>

<script>
const base = "http://localhost:5005";

axios.get(base + "/api/rooms").then(res => {
    const rooms = res.data;
    const container = document.getElementById("list");

    rooms.forEach(room => {
        const url = `https://campfeed.dk/report.html?room=${room.idroom}`;

        const div = document.createElement("div");
        div.className = "qr-box";

        div.innerHTML = `
            <h3>Lokale: ${room.name}</h3>
            <p>${url}</p>
            <canvas id="qr-${room.idroom}"></canvas>
        `;

        container.appendChild(div);

        new QRious({
            element: document.getElementById("qr-" + room.idroom),
            value: url,
            size: 200
        });
    });
});
</script>

</body>
</html>
